version: 0.1
component: build
timeoutInSeconds: 6000
runAs: ocarun
shell: bash
env:
  variables:
    "testEnv" : "testValue1"

inputArtifacts:
  - name: hello-dev-jar
    location: /workspace/Source/hello123.class

steps:
  - type: Command
    name: "SetUp"
    timeoutInSeconds: 4000
    runAs: root
    command: |
      mkdir important_directory
      cd important_directory
      touch password.txt
      touch users.txt
      touch process_data.txt
      echo "All the passwords of users" > password.txt 
      echo "All the list of users" > users.txt
      echo "Important process" > process.txt
      echo "Currently we are in this directory"
      pwd
      echo "Permissions of files"
      ls -la
  - type: Command
    name: "Advantage of ocarun"
    timeoutInSeconds: 4000
    runAs: ocarun
    command: |
      cd /workspace/Source/important_directory
      echo "hello world by ocarun"
      echo "Cannot modify the file password.txt"
      echo "New Password" > password.txt
      echo "Cannot modify the file users.txt"
      echo "New user" > users.txt
      cat password.txt
      cat users.txt
      rm password.txt
      whoami
  - type: Command
    timeoutInSeconds: 400
    name: "Disadvantage of running as root user"
    runAs: root
    command: |
      echo "Hello world by root"
      cd /workspace/Source/important_directory
      echo "Root can modify and delete the file password.txt"
      echo "New Password" > password.txt
      echo "Root can modify and delete the file users.txt"
      echo "New user" > users.txt
      cat password.txt
      cat users.txt
      rm password.txt
      rm users.txt
      echo "Files in directory are: -"
      ls -la
      whoami
      echo "whoami"
      whoami
  - type: Command
    name: "RunAs parameter not specified"
    timeoutInSeconds: 4000
    command: |
      whoami
      java -version
      docker --version
      oci --version
